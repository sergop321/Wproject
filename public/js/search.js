// Generated by CoffeeScript 1.6.3
$(function() {
  var category, sub_category;
  $("#slider-range").slider({
    range: true,
    min: 0,
    max: 1000,
    values: [75, 300],
    slide: function(event, ui) {
      return $("#amount").val(ui.values[0] + " - " + ui.values[1] + " שח ");
    }
  });
  $("#amount").val($("#slider-range").slider("values", 0) + " - " + $("#slider-range").slider("values", 1) + " שח ");
  $("#main_categories a").click(function(event) {
    event.preventDefault();
    if ($(this).parent().hasClass("selected")) {
      return $(this).parent().removeClass("selected");
    } else {
      return $(this).parent().addClass("selected");
    }
  });
  $(".categories #main_categories i").click(function(event) {
    var sub_category;
    event.preventDefault();
    sub_category = $(this).parent().find("ul.sub_categories");
    if ($(sub_category).hasClass("hidden")) {
      $(this).transition({
        rotate: '-90deg'
      });
      $(sub_category).slideDown("slow");
      return $(sub_category).removeClass("hidden");
    } else {
      $(this).transition({
        rotate: '0deg'
      });
      return $(sub_category).slideUp(400, function() {
        return $(sub_category).addClass("hidden");
      });
    }
  });
  window.router();
  window.onhashchange = window.router;
  category = get_parm_from_query("category");
  sub_category = get_parm_from_query("sub_category");
  if (category != null) {
    if ($("#" + category).length > 0) {
      $("#" + category).find("ul.sub_categories").removeClass("hidden");
      $("#" + category).find("i.icon-chevron-left").transition({
        rotate: '-90deg'
      });
      if ($("#" + sub_category).length > 0) {
        return $("#" + sub_category).addClass("selected");
      } else {
        return $("#" + category).addClass("selected");
      }
    }
  }
});
